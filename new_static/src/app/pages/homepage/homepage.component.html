<ng-template #uploadModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Upload image</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="mb-4">
            <div class="custom-file">
                <input type="file" class="custom-file-input" id="inputImg"
                       (change)="handleFileUpload($event.target.files)" />
                <label class="custom-file-label"
                       for="inputImg">{{imgFile ? imgFile.name : 'Upload file (required)'}}</label>
            </div>
            <hr class="my-4">
            <input type="text"
                   class="form-control"
                   placeholder="Insert URL image (optional)"
                   aria-label="Search" id="uploadUrl" [(ngModel)]="imgUrl">
        </div>

        <div class="progress-wrapper" *ngIf="uploadLoading">
            <div class="progress-info">
                <div class="progress-label">
                    <span>Processing...</span>
                </div>
            </div>
            <div class="progress">
                <div class="progress-bar progress-bar-striped progress-bar-animated bg-info" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
            </div>
        </div>

        <button class="btn btn-info btn-lg btn-block" *ngIf="!uploadLoading" [disabled]="!imgFile" (click)="sendImgUpload()">Send file</button>
    </div>
</ng-template>

<div class="row pt-5 pt-md-9 wrapper">
    <div class="col-lg-6 col-md-8 col-sm-10 col-12 mx-auto">
        <img [src]="fandangoLogo" class="img-logo" alt="Fandango">
        <form #homepageForm="ngForm" (ngSubmit)="sendInput(homepageForm)">
            <div class="form-group homepage-form mb-3">
                <div class="input-group input-group-alternative mb-4 border">
                    <input [type]="inputType['type']"
                           class="form-control shadow--hover"
                           [placeholder]="inputPlaceholder" [pattern]="inputType['pattern']"
                           aria-label="Search" ngModel name="url" required>
                    <div class="input-group-append">
                        <button class="input-group-text" type="submit"><i class="fas fa-search"
                                                                          [ngClass]="{'text-info c-pointer': homepageForm.valid , 'text-gray': !homepageForm.valid }"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!--            <div class="input-group mb-3">-->
            <!--                <input [type]="inputType['type']"-->
            <!--                       class="form-control shadow&#45;&#45;hover"-->
            <!--                       [placeholder]="inputPlaceholder" [pattern]="inputType['pattern']"-->
            <!--                       aria-label="Search" ngModel name="url" required>-->
            <!--                <div class="input-group-append">-->
            <!--                    <button class="btn btn-info" type="submit" [disabled]="!homepageForm.valid">-->
            <!--                        Analyze-->
            <!--                    </button>-->
            <!--                </div>-->
            <!--            </div>-->
        </form>

        <!--                <form class="navbar-search navbar-search-dark" #homepageForm="ngForm" (ngSubmit)="sendInput(homepageForm.value)">-->
        <!--                            <div class="form-group mb-3" [ngClass]="{ 'focused': focus === true }">-->
        <!--                                <div class="input-group input-group-alternative">-->
        <!--                                    <input [type]="inputType.type" class="form-control" [placeholder]="inputPlaceholder"-->
        <!--                                           aria-label="Search" [pattern]="inputType['pattern']" ngModel name="url" (focus)="focus = true"-->
        <!--                                           (blur)="focus = false" required>-->
        <!--                                    <div class="input-group-append">-->
        <!--                                        <button type="submit" style="color: #8898aa" class="input-group-text" [disabled]="!homepageForm.valid"><i class="fas fa-search" [ngClass]="{'text-info': homepageForm.valid, 'text-gray': !homepageForm.valid}"></i></button>-->
        <!--                                    </div>-->
        <!--                                </div>-->
        <!--                            </div>-->
        <!--                        </form>-->

        <div class="text-left btn-group-lg">
            <button *ngFor="let btn of buttonList"
                    class="btn btn-icon"
                    [class.btn-info]="typeAnalyze===btn.type"
                    (click)="changeButton(btn)"
                    placement="bottom"
                    [ngbTooltip]=btn.description>
                <i [ngClass]="btn.icon"></i>
                <span class="btn-inner--text">{{btn.name}}</span>
            </button>

            <div class="float-right">
                <button class="btn btn-lg btn-icon" (click)="showUploadModal(uploadModal)">
                    <i class="fas fa-file-upload"></i>
                    <span class="btn-inner--text">Upload Image</span>
                </button>

                <a href="http://40.114.234.51:8080/app/kibana">
                    <button class="btn btn-lg btn-icon">
                        <img class="inner-img mr-2" src="assets/img/logos/siren.png">
                        <span>Advanced</span>
                    </button>
                </a>
                <!--                <p class="text-sm text-center mt-1">Advanced investigative <br>functions</p>-->
            </div>
        </div>
    </div>
</div>
