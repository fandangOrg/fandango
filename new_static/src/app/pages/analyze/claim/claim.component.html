<div class="col-md-8 col-12 analyze-container" *ngIf="claims">
    <div class="grid">
        <div class="row">
            <div class="col-12">

                <style>
                    .table th {
                        white-space: normal;
                    }
                </style>

                <h6 class="heading text-muted">Claims</h6>
                <div class="table-responsive">
                    <table class="table align-items-center table-flush">
                        <!--                        <thead class="bg-white">-->
                        <!--                        <tr>-->
                        <!--                            <th scope="col">Body</th>-->
                        <!--                            <th scope="col">Date</th>-->
                        <!--                            <th scope="col"></th>-->
                        <!--                        </tr>-->
                        <!--                        </thead>-->
                        <tbody>
                        <ng-container *ngFor="let claim of claims['similar_claim']">
                            <tr [class.bg-white]="claim.expand">
                                <th scope="row">
                                    {{claim.text}}
                                </th>
                                <th scope="row" style="white-space: nowrap">
                                    {{claim.datePublished | date: 'dd-MM-yyyy'}}
                                </th>
                                <th scope="row" width="1%">
                                    <a (click)="claim.expand = !claim.expand">
                                        <i *ngIf="!claim.expand" class="fas fa-caret-square-down fa-2x c-pointer"></i>
                                        <i *ngIf="claim.expand" class="fas fa-caret-square-up fa-2x c-pointer"></i>
                                    </a>
                                </th>
                            </tr>
                            <ng-container *ngIf="claim.expand">
                                <th scope="row" colspan="3" class="p-0">
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th scope="col">Author</th>
                                            <th scope="col">Label</th>
                                            <th scope="col">Rating value</th>
                                            <th scope="col">Worst Rating</th>
                                            <th scope="col">Best Rating</th>
                                            <th scope="row" width="1%"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr *ngFor="let review of claim.claimReviews">
                                            <td>
                                                {{review.author.name}}
                                            </td>
                                            <td>
                                                {{review.reviewRating.alternateName}}
                                            </td>
                                            <td>
                                                {{review.reviewRating.ratingValue}}
                                                <!--                                                <div class="d-flex align-items-center">-->
                                                <!--                                                    <span class="mr-2">{{review.reviewRating.ratingValue * 20}}%</span>-->
                                                <!--                                                    <div>-->
                                                <!--                                                        <div class="progress" style="width: 200px">-->
                                                <!--                                                            <div class="progress-bar"-->
                                                <!--                                                                 [ngClass]="getProgressColor(review.reviewRating.ratingValue * 20)"-->
                                                <!--                                                                 role="progressbar"-->
                                                <!--                                                                 aria-valuemin="0" aria-valuemax="100"-->
                                                <!--                                                                 [style.width]="review.reviewRating.ratingValue * 20 + '%'"></div>-->
                                                <!--                                                        </div>-->
                                                <!--                                                    </div>-->
                                                <!--                                                </div>-->
                                            </td>
                                            <td>
                                                {{review.reviewRating.worstRating}}
                                            </td>
                                            <td>
                                                {{review.reviewRating.bestRating}}
                                            </td>
                                            <td>
                                            <td class="text-right">
                                                <i title="Show Review body"
                                                   (click)="showReviewBody(review.reviewBody, bodyModal)"
                                                   class="fas fa-align-left mr-3 c-pointer"
                                                   style="color:#525f7f !important;"></i>

                                                <a title="Show news" [href]="review.url" target="_blank"><i
                                                    class="fas fa-external-link-alt"
                                                    style="color:#525f7f !important;"></i></a>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </th>
                            </ng-container>
                        </ng-container>

                        <ng-template #bodyModal let-modal>
                            <div class="modal-body">
                                <p>{{reviewBody}}</p>
                            </div>
                        </ng-template>

                        <tr *ngIf="claims.length === 0">
                            <th scope="row" colspan="3" class="text-center">
                                No claims found
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-12 mt-5">
                <h6 class="heading text-muted">Open data</h6>
                <div class="table-responsive">
                    <table class="table align-items-center table-flush">
                        <tbody>
                        <ng-container *ngFor="let data of claims['open_data']">
                            <tr [class.bg-white]="data.expand">
                                <th scope="row">
                                    {{data.name}}
                                </th>
                                <th scope="row" width="1%">
                                    <a title="Show Open Data URL" [href]="data.url" target="_blank"><i
                                        class="fas fa-external-link-alt" style="color:#525f7f !important;"></i></a>
                                </th>
                                <th scope="row" width="1%">
                                    <a (click)="data.expand = !data.expand">
                                        <i *ngIf="!data.expand" class="fas fa-caret-square-down fa-2x c-pointer"></i>
                                        <i *ngIf="data.expand" class="fas fa-caret-square-up fa-2x c-pointer"></i>
                                    </a>
                                </th>
                            </tr>
                            <ng-container *ngIf="data.expand">
                                <th scope="row" colspan="3" class="p-0">
                                    <table class="table">
                                        <tbody>
                                        <tr>
                                            <td style="white-space: normal">
                                                {{data.text}}
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </th>
                            </ng-container>
                        </ng-container>

                        <tr *ngIf="claims['open_data'].length === 0">
                            <th scope="row" colspan="2" class="text-center">
                                No Open Data found
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>
