annotation.controller("annotationCtrl",["$scope","$http","crUrl","lang","next","update","$state","manual","domain",function(e,t,a,n,l,o,c,i,u){e.loadingAnalyzeUrl=!1,e.selectedLanguage="en",e.$state=c,e.analyzeOk=!1,e.newExist=!0,$(".alert").hide(),e.page={author:"",publisher:"",url:"",text:"",title:""},$(window).on("hashchange",function(t){e.page.author="",e.page.title="",e.page.text="",e.page.url="",e.page.publisher="",e.analyzeStarted=!1,e.analyzeOk=!1}),e.changeTextNews=function(t){e.news=t.data,console.log(e.news),e.page.publisher=e.news.source_domain,e.page.url=e.news.url,e.page.title=e.news.title,e.page.text=e.news.text,e.page.author=e.news.authors,$(".custom-control-input").attr("checked",!1)},angular.element(function(){$("[rel=tooltip]").tooltip({placement:"left"}),n.getLanguages().then(function(t){e.languages=t.data,e.loading=!1})}),e.changeLanguage=function(t,a){"False"!==t.active&&(e.selectedLanguage=t.language,"manual"!==a&&l.goNext(e.selectedLanguage).then(function(t){e.changeTextNews(t),t.data.hasOwnProperty("END")?e.newExist=!1:($(".custom-control-input").attr("checked",!1),e.fakeSelected=void 0,$("#btnStartAnalyze").addClass("animated fadeOut faster"),setTimeout(function(){$("#btnStartAnalyze").remove()},500),e.newExist=!0,e.analyzeStarted=!0)}))},e.sendAnnotation=function(t,a,n){switch(n){case"auto":if(!t)return;e.fakeSelected=t;var c={id:e.news.id,label:e.fakeSelected};o.doUpdate(c).then(function(t){l.goNext(e.selectedLanguage).then(function(t){e.changeTextNews(t)})});break;case"manual":if(!t||!a)return;e.fakeSelected=t;c={label:e.fakeSelected,lang:e.selectedLanguage,url:e.page.url};console.log(c),i.manualAnnotation(c).then(function(e){console.log(e),$(".custom-control-input").attr("checked",!1)});break;case"domain":if(!a||!t)return;c={list_url:a,label:t};e.fakeSelected=t,u.domainAnnotation(c).then(function(t){console.log(t),e.page.text=""})}$(".alert").fadeTo(1250,500).slideUp(500,function(){$(".alert").slideUp(500),e.fakeSelected=void 0})},e.skipAnnotation=function(){l.goNext(e.selectedLanguage).then(function(t){e.changeTextNews(t),$(".custom-control-input").attr("checked",!1),e.fakeSelected=void 0})},e.startAnalyze=function(){$("#btnStartAnalyze").addClass("animated fadeOut faster"),setTimeout(function(){$("#btnStartAnalyze").remove()},500),l.goNext(e.selectedLanguage).then(function(t){e.changeTextNews(t),e.analyzeStarted=!0})},e.analyzeUrl=function(t){if(t){e.loadingAnalyzeUrl=!0,e.page.url=t;var n=e.page.url;a.analyzeUrl(n).then(function(t){e.changeTextNews(t),console.log(e.page),e.analyzeOk=!0,e.loadingAnalyzeUrl=!1},function(t){e.analyzeOk=!1,e.loadingAnalyzeUrl=!1})}}}]);