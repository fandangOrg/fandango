app.controller("annotationCtrl",["$rootScope","$scope","$http","$document","crUrl","lang","next","update","$state","manual","domain",function(e,t,n,a,o,l,c,i,u,g,s){t.loadingAnalyzeUrl=!1,t.selectedLanguage="en",t.$state=u,t.analyzeOk=!1,t.newExist=!0,t.page={author:"",publisher:"",url:"",text:"",title:""},$(window).on("hashchange",function(e){t.page.author="",t.page.title="",t.page.text="",t.page.url="",t.page.publisher="",t.analyzeStarted=!1,t.analyzeOk=!1}),t.changeTextNews=function(e){t.news=e.data,console.log(t.news),t.page.publisher=t.news.source_domain,t.page.url=t.news.url,t.page.title=t.news.title,t.page.text=t.news.text,t.page.author=t.news.authors,$(".custom-control-input").attr("checked",!1)},angular.element(function(){$("[rel=tooltip]").tooltip({placement:"left"}),l.getLanguages().then(function(e){t.languages=e.data,t.loading=!1})}),t.changeLanguage=function(e,n){"False"!==e.active&&(t.selectedLanguage=e.language,"manual"!==n&&c.goNext(t.selectedLanguage).then(function(e){t.changeTextNews(e),e.data.hasOwnProperty("END")?t.newExist=!1:($(".custom-control-input").attr("checked",!1),t.fakeSelected=void 0,$("#btnStartAnalyze").addClass("animated fadeOut faster"),setTimeout(function(){$("#btnStartAnalyze").remove()},500),t.newExist=!0,t.analyzeStarted=!0)}))},t.sendDomainAnnotation=function(e){if(e){var n={list_url:e};s.domainAnnotation(n).then(function(e){console.log(e)})}},t.sendAnnotation=function(e){if(e){t.fakeSelected=e;var n={id:t.news.id,label:t.fakeSelected};i.doUpdate(n).then(function(e){c.goNext(t.selectedLanguage).then(function(e){t.changeTextNews(e),t.fakeSelected=void 0})})}},t.sendManualAnnotation=function(e){t.fakeSelected=e;var n={label:t.fakeSelected,lang:t.selectedLanguage,url:t.page.url};console.log(n),g.manualAnnotation(n).then(function(e){console.log(e),$(".custom-control-input").attr("checked",!1),t.fakeSelected=void 0})},t.skipAnnotation=function(){c.goNext(t.selectedLanguage).then(function(e){t.changeTextNews(e),$(".custom-control-input").attr("checked",!1),t.fakeSelected=void 0})},t.startAnalyze=function(){$("#btnStartAnalyze").addClass("animated fadeOut faster"),setTimeout(function(){$("#btnStartAnalyze").remove()},500),c.goNext(t.selectedLanguage).then(function(e){t.changeTextNews(e),t.analyzeStarted=!0})},t.analyzeUrl=function(e){if(e){t.loadingAnalyzeUrl=!0,t.page.url=e;var n=t.page.url;o.analyzeUrl(n).then(function(e){t.changeTextNews(e),console.log(t.page),t.analyzeOk=!0,t.loadingAnalyzeUrl=!1},function(e){t.analyzeOk=!1,t.loadingAnalyzeUrl=!1})}}}]);