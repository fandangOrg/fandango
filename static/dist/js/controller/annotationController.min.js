app.controller("annotationCtrl",["$scope","$http","$document","errorCode","url","fakeness","feedback","lang","next","update",function(n,e,t,a,l,o,i,s,c,d){n.fakenessDone=!1,n.loadingFakeness=!1,n.loadingAnalyzeUrl=!1,n.feedbackSelected=!1,n.radioSelected=!1,n.page={author:"",publisher:""},n.selectedLanguage="en",angular.element(function(){$("[rel=tooltip]").tooltip({placement:"left"}),s.getLanguages().then(function(e){n.languages=e.data,n.loading=!1})}),n.changeLanguage=function(e){"False"!==e.active&&(n.selectedLanguage=e.language,$("#btnStartAnalyze").addClass("animated fadeOut faster"),setTimeout(function(){$("#btnStartAnalyze").remove()},500),n.analyzeStarted=!0,c.goNext(n.selectedLanguage).then(function(e){n.news=e.data,console.log(n.news),n.page.publisher=n.news.publish,n.url=n.news.url,n.title=n.news.title,n.text=n.news.text,$(".custom-control-input").attr("checked",!1),n.fakeSelected="reset",n.radioSelected=!1}))},n.sendFeedback=function(e){n.feedbackSelected=!0,$("#alert").fadeIn(),$("#feedback").fadeOut();var t={title:n.title,text:n.text,label:e};i.sendFb(t).then(function(e){console.log(e)},function(e){})},n.sendAnnotation=function(){if(n.radioSelected){var e={id:n.news.id,label:n.fakeSelected};d.doUpdate(e).then(function(e){c.goNext(n.selectedLanguage).then(function(e){n.news=e.data,console.log(n.news),n.page.publisher=n.news.publish,n.url=n.news.url,n.title=n.news.title,n.text=n.news.text,$(".custom-control-input").attr("checked",!1),n.fakeSelected="reset",n.radioSelected=!1})})}},n.skipAnnotation=function(){c.goNext(n.selectedLanguage).then(function(e){n.news=e.data,console.log(n.news),n.page.publisher=n.news.publish,n.url=n.news.url,n.title=n.news.title,n.text=n.news.text,$(".custom-control-input").attr("checked",!1),n.fakeSelected="reset",n.radioSelected=!1})},n.startAnalyze=function(){$("#btnStartAnalyze").addClass("animated fadeOut faster"),setTimeout(function(){$("#btnStartAnalyze").remove()},500),c.goNext(n.selectedLanguage).then(function(e){n.news=e.data,console.log(n.news),n.page.publisher=n.news.publish,n.url=n.news.url,n.title=n.news.title,n.text=n.news.text,n.analyzeStarted=!0})},$("input[type=radio]").click(function(e){n.radioSelected=!0}),n.analyzeUrl=function(){if(!n.url)return!1;n.loadingAnalyzeUrl=!0;var e=n.url;l.analyzeUrl(e).then(function(e){n.page=e.data,n.title=n.page.title,n.text=n.page.body,n.loadingAnalyzeUrl=!1},function(e){n.loadingAnalyzeUrl=!1})}}]);